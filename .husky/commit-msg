# Simple commit message format check
commit_regex='^(feat|fix|docs|style|refactor|test|chore)(\(.+\))?: .{1,50}'

# Skip validation for merge commits
if head -n 1 "$1" | grep -qE '^Merge (branch|pull request)'; then
    exit 0
fi

if ! grep -qE "$commit_regex" "$1"; then
    echo "‚ùå Incorrect commit message format!"
    echo "Please use the following format:"
    echo "  feat: Add new features"
    echo "  fix: Fix bugs"
    echo "  docs: Update documentation"
    echo "  style: Adjust code format"
    echo "  refactor: Code refactoring"
    echo "  test: Add tests"
    echo "  chore: Changes to the build process or auxiliary tools"
    echo ""
    echo "Example:"
    echo "  feat: Add user login feature"
    echo "  fix(login): Fix login validation issue"
    exit 1
fi
